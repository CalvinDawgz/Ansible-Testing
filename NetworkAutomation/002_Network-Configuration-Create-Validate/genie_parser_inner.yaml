---

- name: Read in parse_genie role
  include_role:
    name: clay584.parse_genie

- name: Retrieve interface information
  ios_command:
    commands:
      - "{{ genie_command }}"
  register: output

- name: Set facts for Genie Filter
  set_fact:
    parsed_output: "{{ genie_parsed_data + [output['stdout'][0] | parse_genie(command=genie_command, os=ansible_network_os)] }}"

- name: Append parsed data to list
  set_fact:
    "{{ genie_parsed_data }}": "{{ genie_parsed_data + parsed_output }}"
